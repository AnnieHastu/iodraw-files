```mermaid
graph TD
    A[开始] --> B(支持图像输入);

    subgraph 1. 因果特征提取模块
        B --> C{可学习掩码转换};
        C --> D[因果掩码矩阵];
        C --> E[反事实对比样本];
        D & E --> F[信息丰富且经反事实约束的样本];
    end

    F --> G{2. 元迁移学习模块};
    G --> H[元优化特征提取器];

    subgraph 3. 条件注意力模块
        H --> I[独立编码支持特征];
        J[查询图像输入] --> K[编码查询特征];
        I & K --> L[门控注意力网络];
        L --> M[增强特征];
    end

    M --> N{4. Transformer模块};
    subgraph Transformer模块核心流程
        N --> O[全局自注意力编码器];
        N --> P[可学习目标查询初始化];
        O & P --> Q[解码器迭代交叉注意力与特征精炼];
        Q --> R[前馈网络 (FFN)];
        R --> S[类别分类];
        R --> T[边界框回归];
        S & T --> U[DETR二分图匹配机制];
    end

    U --> V[火焰/烟雾/背景检测结果];
    V --> W[结束];
```