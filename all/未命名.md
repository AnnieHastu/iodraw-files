```mermaid
graph TD
    A[支持图像输入] --> B{因果特征提取模块};
    B --> C[可学习掩码转换];
    C --> D[因果掩码矩阵] & E[反事实对比样本];
    D & E --> F[信息丰富且经过反事实约束的样本];
    F --> G{元迁移学习模块};
    G --> H[元优化特征提取器];
    H --> I{条件注意力模块};
    I --> J[独立编码支持特征] & K[编码查询特征];
    J & K --> L[门控机制注意力网络];
    L --> M[增强特征];
    M --> N{Transformer模块};
    N --> O[全局自注意力编码器];
    N --> P[可学习目标查询];
    O & P --> Q[解码器迭代交叉注意力与特征精炼];
    Q --> R[前馈网络];
    R --> S[类别分类与边界框回归];
    S --> T[火焰、烟雾或背景的一对一匹配结果];

    subgraph CMCC-DETR 总体结构
        B --- 
    end
```